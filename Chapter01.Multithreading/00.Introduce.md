# Introduce

## 1.操作系统层面上关于多线程和多线协作的接口原理

无论是哪种编程语言和库，其最终都是要运行在操作系统上的，引用程序本身的特性应该是决定采用何种编程工具的最主要因素，但是无论你采用什么样的编程语言，**通过了解操作系统 API 从而深入理解操作系统的工作原理,** 这本身就很有重要的意义.

```
线程（Threading）

线程是操作系统的内核对象，当多线程编程时，如果线程数过多，就会导致频繁地上下文切换，这些对性能是一种额外的损耗.

例如，在一些高并发的网络服务编程中，使用一个线程服务一个 socket 连接是很不明智的，因此现在的主流做法是利用操作系统提供了基于事件模式的异步编程模型，用

少量的线程来服务大量的网络连接和IO。但是采用异步和基于事件的编程模型，让程序代码变得复杂，非常容易出错，也提高了排查错误的难度.

```

```
协程 （Coroutine)

是在应用层模拟的线程，它避免了上下文切换的额外损耗，同时又兼顾了多线程的优点，简化了高并发程序的复杂度

还是以上面的高并发网络服务为例，可以为每一个 **socket** 连接使用一个协程来处理，在兼顾性能的情况下，代码也清晰. 
```